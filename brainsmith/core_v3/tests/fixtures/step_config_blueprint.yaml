version: "3.0"
name: "Step Configuration Example"
description: "Blueprint demonstrating step configuration options"

hw_compiler:
  kernels:
    - "MatMul"
    - ["LayerNorm", ["hls"]]
    - ["Softmax", ["rtl", "hls"]]
  
  transforms:
    pre_quantization:
      - "fold_constants"
      - "streamline"
    quantization:
      - "quantize"
    post_quantization:
      - "convert_to_hw"
  
  build_steps:
    - "step_create_dataflow_partition"
    - "step_specialize_layers"
    - "step_target_fps_parallelization"
    - "step_apply_folding_config"
    - "step_minimize_bit_width"
    - "step_generate_estimate_reports"
    - "step_hw_codegen"
    - "step_hw_ipgen"
    - "step_create_stitched_ip"
  
  config_flags:
    target_device: "xczu7ev"
    clock_period_ns: 5.0

processing:
  preprocessing:
    - name: "input_normalization"
      options:
        - enabled: true
          method: "z_score"
        - enabled: false

search:
  strategy: "exhaustive"
  constraints:
    - metric: "lut_utilization"
      operator: "<="
      value: 0.80

global:
  output_stage: "stitched_ip"
  working_directory: "./step_config_builds"
  
  # Step configuration examples (choose one approach):
  
  # Option 1: Explicit step names
  start_step: "step_specialize_layers"
  stop_step: "step_hw_codegen"
  
  # Option 2: Step indices (commented out)
  # start_step: 1
  # stop_step: 6
  
  # Option 3: Semantic types (commented out)
  # input_type: "hwgraph"    # Start from hardware dataflow graph
  # output_type: "rtl"       # Stop at RTL generation
  
  # Option 4: Mixed configuration (commented out)
  # start_step: "step_create_dataflow_partition"
  # output_type: "ip"        # Stop at IP generation