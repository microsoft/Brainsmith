[pytest]
testpaths = tests/integration
python_files = test_*.py
python_classes = Test*
python_functions = test_*

# Markers for tiered execution
markers =
    fast: Fast tests (< 1 min, no FINN)
    finn_build: Real FINN execution (1-30 min)
    rtl_sim: RTL simulation tests (30min - hours)
    slow: Slow tests (hours)
    bitfile: Bitfile generation (hours - days)
    hardware: Requires actual FPGA hardware

# Console output
console_output_style = progress
log_cli = false
log_cli_level = INFO

# Coverage
addopts =
    --strict-markers
    --strict-config
    --cov=brainsmith.dse
    --cov-report=html:htmlcov
    --cov-report=term-missing:skip-covered
    --cov-report=json:coverage.json
    --cov-branch
    -ra
    --tb=short
    --durations=20

# Timeouts
# Default: 2 hours for FINN/RTL builds
# timeout = 7200
# Thread-based timeout
# timeout_method = thread

# Warnings
filterwarnings =
    error::DeprecationWarning
    error::PendingDeprecationWarning
    ignore::pytest.PytestUnraisableExceptionWarning
