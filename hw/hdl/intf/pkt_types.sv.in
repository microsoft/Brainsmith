// Copyright (C) 2024, Advanced Micro Devices, Inc. All rights reserved.
//
// This file is subject to the Xilinx Design License Agreement located
// in the LICENSE.md file in the root directory of this repository.
//
// This file contains confidential and proprietary information of Xilinx, Inc.
// and is protected under U.S. and international copyright and other
// intellectual property laws.
//
// DISCLAIMER
// This disclaimer is not a license and does not grant any rights to the materials
// distributed herewith. Except as otherwise provided in a valid license issued to
// you by Xilinx, and to the maximum extent permitted by applicable law: (1) THESE
// MATERIALS ARE MADE AVAILABLE "AS IS" AND WITH ALL FAULTS, AND XILINX HEREBY
// DISCLAIMS ALL WARRANTIES AND CONDITIONS, EXPRESS, IMPLIED, OR STATUTORY,
// INCLUDING BUT NOT LIMITED TO WARRANTIES OF MERCHANTABILITY, NONINFRINGEMENT, OR
// FITNESS FOR ANY PARTICULAR PURPOSE; and (2) Xilinx shall not be liable (whether
// in contract or tort, including negligence, or under any other theory of
// liability) for any loss or damage of any kind or nature related to, arising
// under or in connection with these materials, including for any direct, or any
// indirect, special, incidental, or consequential loss or damage (including loss
// of data, profits, goodwill, or any type of loss or damage suffered as a result
// of any action brought by a third party) even if such damage or loss was
// reasonably foreseeable or Xilinx had been advised of the possibility of the
// same.
//
// CRITICAL APPLICATIONS
// Xilinx products are not designed or intended to be fail-safe, or for use in
// any application requiring failsafe performance, such as life-support or safety
// devices or systems, Class III medical devices, nuclear facilities, applications
// related to the deployment of airbags, or any other applications that could lead
// to death, personal injury, or severe property or environmental damage
// (individually and collectively, "Critical Applications"). Customer assumes the
// sole risk and liability of any use of Xilinx products in Critical Applications,
// subject only to applicable laws and regulations governing limitations on product
// liability.
//
// THIS COPYRIGHT NOTICE AND DISCLAIMER MUST BE RETAINED AS PART OF THIS FILE AT ALL TIMES.
`define STI_GEN

package cTypes;

// Layers
    parameter integer N_LAYERS = ${TL_N_layers};

// Matrix
    parameter integer MH = ${TL_Mtrx_height};
    parameter integer MW = ${TL_Mtrx_width};

// Activation width
    parameter integer ACTIVATION_WIDTH = ${TL_Activation_width};

// Custom partitions
    parameter integer MM_KERNEL = ${TL_MM_kernel};
    parameter integer PUMPED_COMPUTE = ${TL_Pumped_compute};

// Partition 0
    // Parallelization
    parameter integer SIMD_P0 = ${p0_DuplicateStreams_hls_0_PE};
    parameter integer PE_P0 = ${p0_Thresholding_rtl_0_PE};

    parameter integer SIMD_P0_MM = ${p0_MVAU_rtl_0_SIMD};
    parameter integer PE_P0_MM = ${p0_MVAU_rtl_0_PE}; 
    parameter integer PE_P0_THR = ${p0_Thresholding_rtl_0_PE};

    // Weights
    parameter INIT_FILE_P0_0     = "${GEN_FINN_PATH}/mvau_weight_files_partition_0/p0_MVAU_rtl_0/memblock.dat";
    parameter INIT_FILE_P0_1     = "${GEN_FINN_PATH}/mvau_weight_files_partition_0/p0_MVAU_rtl_1/memblock.dat";
    parameter INIT_FILE_P0_2     = "${GEN_FINN_PATH}/mvau_weight_files_partition_0/p0_MVAU_rtl_2/memblock.dat";

    // Thresholds
    parameter THRESHOLDS_PATH_P0_0    = "${GEN_FINN_PATH}/mvau_weight_files_partition_0/p0_Thresholding_rtl_0/p0_Thresholding_rtl_0_";
    parameter THRESHOLDS_PATH_P0_1    = "${GEN_FINN_PATH}/mvau_weight_files_partition_0/p0_Thresholding_rtl_1/p0_Thresholding_rtl_1_";
    parameter THRESHOLDS_PATH_P0_2    = "${GEN_FINN_PATH}/mvau_weight_files_partition_0/p0_Thresholding_rtl_2/p0_Thresholding_rtl_2_";

    // Reference
    parameter P0_IN_FILE_PATH       = "${GEN_FINN_PATH}/refio/int_results/global_in.txt";
    parameter P0_OUT_0_FILE_PATH    = "${GEN_FINN_PATH}/refio/int_results/Add_0_out0.txt";
    parameter P0_OUT_1_FILE_PATH    = "${GEN_FINN_PATH}/refio/int_results/Add_1_out0.txt";
    parameter P0_OUT_2_FILE_PATH    = "${GEN_FINN_PATH}/refio/int_results/Add_2_out0.txt";

// Partition 1
    // Parallelization
    parameter integer SIMD_P1 = ${p1_Shuffle_A_0_PE};
    parameter integer PE_P1 = ${p1_Thresholding_rtl_1_PE};

    // Shuffle
    parameter integer PE_SHUFFLE_A = ${p1_Shuffle_A_0_PE};
    parameter integer PE_SHUFFLE_B = ${p1_Shuffle_B_0_PE};
    parameter integer PE_SHUFFLE_C = ${p1_Shuffle_C_0_PE};

    // Softmax
    parameter integer PE_SOFTMAX = ${p1_Softmax_0_SIMD};
    
    // Heads
    parameter integer H_SIZE = ${TL_Head_size};
    parameter integer N_HEADS = MW / H_SIZE;

    // MatMul 0
    parameter integer SIMD_P1_MM_0 = ${p1_MVAU_dyn_rtl_0_SIMD};
    parameter integer PE_P1_MM_0 = ${p1_MVAU_dyn_rtl_0_PE};
    parameter integer PE_P1_THR_0 = ${p1_Thresholding_rtl_0_PE};

    // MatMul 1
    parameter integer SIMD_P1_MM_1 = ${p1_MVAU_dyn_rtl_1_SIMD};
    parameter integer PE_P1_MM_1= ${p1_MVAU_dyn_rtl_1_PE};
    parameter integer PE_P1_THR_1 = ${p1_Thresholding_rtl_1_PE};

    // Thresholds
    parameter THRESHOLDS_PATH_P1_0     = "${GEN_FINN_PATH}/thresholds_partition_1/Thresholding_rtl_0/Thresholding_rtl_0_";
    parameter THRESHOLDS_PATH_P1_1     = "${GEN_FINN_PATH}/thresholds_partition_1/Thresholding_rtl_1/Thresholding_rtl_1_";

    // Reference
    parameter P1_IN_0_FILE_PATH     = "${GEN_FINN_PATH}/refio/int_results/Add_0_out0.txt";
    parameter P1_IN_1_FILE_PATH     = "${GEN_FINN_PATH}/refio/int_results/Add_1_out0.txt";
    parameter P1_IN_2_FILE_PATH     = "${GEN_FINN_PATH}/refio/int_results/Add_2_out0.txt";
    parameter P1_OUT_FILE_PATH      = "${GEN_FINN_PATH}/refio/int_results/Reshape_3_out0.txt";

// Partition 2
    // Parallelization
    parameter integer SIMD_P2_0 = ${p2_MVAU_rtl_0_SIMD};
    parameter integer SIMD_P2_1 = ${p2_AddStreams_hls_0_PE};
    parameter integer PE_P2 = ${p2_Thresholding_rtl_4_PE};

    parameter integer SIMD_P2_MM_0 = ${p2_MVAU_rtl_0_SIMD};
    parameter integer PE_P2_MM_0 = ${p2_MVAU_rtl_0_PE}; 
    parameter integer PE_P2_THR_0 = ${p2_Thresholding_rtl_0_PE};

    parameter integer SIMD_P2_MM_1 = ${p2_MVAU_rtl_1_SIMD};
    parameter integer PE_P2_MM_1 = ${p2_MVAU_rtl_1_PE}; 
    parameter integer PE_P2_THR_1 = ${p2_Thresholding_rtl_1_PE};

    parameter integer SIMD_P2_MM_2 = ${p2_MVAU_rtl_2_SIMD};
    parameter integer PE_P2_MM_2 = ${p2_MVAU_rtl_2_PE}; 
    parameter integer PE_P2_THR_2 = ${p2_Thresholding_rtl_2_PE};

    // Weights
    parameter INIT_FILE_P2_0     = "${GEN_FINN_PATH}/mvau_weight_files_partition_2/p2_MVAU_rtl_0/memblock.dat";
    parameter INIT_FILE_P2_1     = "${GEN_FINN_PATH}/mvau_weight_files_partition_2/p2_MVAU_rtl_1/memblock.dat";
    parameter INIT_FILE_P2_2     = "${GEN_FINN_PATH}/mvau_weight_files_partition_2/p2_MVAU_rtl_2/memblock.dat";

    // Thresholds
    parameter THRESHOLDS_PATH_P2_0    = "${GEN_FINN_PATH}/mvau_weight_files_partition_2/p2_Thresholding_rtl_0/p2_Thresholding_rtl_0_";
    parameter THRESHOLDS_PATH_P2_1    = "${GEN_FINN_PATH}/mvau_weight_files_partition_2/p2_Thresholding_rtl_1/p2_Thresholding_rtl_1_";
    parameter THRESHOLDS_PATH_P2_2    = "${GEN_FINN_PATH}/mvau_weight_files_partition_2/p2_Thresholding_rtl_2/p2_Thresholding_rtl_2_";
    parameter THRESHOLDS_PATH_P2_3    = "${GEN_FINN_PATH}/mvau_weight_files_partition_2/p2_Thresholding_rtl_3/p2_Thresholding_rtl_3_";
    parameter THRESHOLDS_PATH_P2_4    = "${GEN_FINN_PATH}/mvau_weight_files_partition_2/p2_Thresholding_rtl_4/p2_Thresholding_rtl_4_";

    // Reference
    parameter P2_IN_0_FILE_PATH     = "${GEN_FINN_PATH}/refio/int_results/Reshape_3_out0.txt";
    parameter P2_IN_1_FILE_PATH     = "${GEN_FINN_PATH}/refio/int_results/global_in.txt";
    parameter P2_OUT_FILE_PATH      = "${GEN_FINN_PATH}/refio/int_results/global_out.txt";

// SIM
    parameter N_LOOPS = ${TL_N_sim_loops};
    parameter CLK_PERIOD = 10ns;
    parameter RST_PERIOD = 4.5 * CLK_PERIOD;
    parameter AST_PERIOD = 10 * CLK_PERIOD;
    parameter TT = 2ns;
    parameter TA = 1ns;
    
endpackage