
name: "BERT Demo"
description: "Hugging face BERT model"

extends: "../../brainsmith/blueprints/bert.yaml"

# Global configursation - all fields optional, can be flat or under global_config
output_stage: "compile_and_package"    # generate_reports | compile_and_package | synthesize_bitstream
working_directory: "work"               # Default: "work"
save_intermediate_models: true         # Default: false
fail_fast: true                        # Default: false
max_combinations: 100000                # Or env BRAINSMITH_MAX_COMBINATIONS
timeout_minutes: 360                     # Or env BRAINSMITH_TIMEOUT_MINUTES

# Smithy parameters (mapped to FINN config)
platform: "V80"                     # Maps to finn_config.board
target_clk: 5                       # Maps to finn_config.synth_clk_period_ns
                                       # Supports units: ps, ns, us, ms (default: ns)

design_space:
  # Inherit kernels from parent blueprint (don't override with empty list)
  # kernels are defined in parent bert.yaml

  # Add pre/post-processing steps to standard BERT blueprint   
  steps:
    - at_start:
        insert: 
          - "bert_cleanup"
          - "remove_head"
          - "remove_tail"

    - at_end:
        insert: "shell_metadata_handover"
